<html>
    <head>
        <title></title>
        <script src="http://openlayers.org/api/OpenLayers.js"></script>
        <script src="lib/OpenStreetMap.js"></script>
        <script type="text/javascript">
            var lat=46.2078;
            var lon=6.147;
            var zoom=14;
            var map, layer;
 
            function init(){
                map = new OpenLayers.Map ("map", {
                controls:[
                    new OpenLayers.Control.Navigation(),
                    new OpenLayers.Control.PanZoomBar(),
                    new OpenLayers.Control.LayerSwitcher(),
                    new OpenLayers.Control.Attribution()],
                    maxExtent: new OpenLayers.Bounds(-20037508.34,-20037508.34,20037508.34,20037508.34),
                    maxResolution: 156543.0399,
                    numZoomLevels: 19,
                    units: 'm',
                    projection: new OpenLayers.Projection("EPSG:900913"),
                    displayProjection: new OpenLayers.Projection("EPSG:4326")
                } );
 
                layerMapnik = new OpenLayers.Layer.OSM.Mapnik("Mapnik");
                map.addLayer(layerMapnik);
                layerCycleMap = new OpenLayers.Layer.OSM.CycleMap("CycleMap");
                map.addLayer(layerCycleMap);
 
                var lonLat = new OpenLayers.LonLat(lon, lat).transform(new OpenLayers.Projection("EPSG:4326"), new OpenLayers.Projection("EPSG:900913"));
 
                map.setCenter (lonLat, zoom);
 
                //Initialise the vector layer using OpenLayers.Format.OSM
                layer = new OpenLayers.Layer.Vector("Point Layer", {
					strategies: [new OpenLayers.Strategy.Fixed()],
					protocol: new OpenLayers.Protocol.HTTP({
						url: "data/antennes.xml",
						format: new OpenLayers.Format.OSM()
					}),
					styleMap: new OpenLayers.StyleMap({
						strokeColor: "#0066cc",
						fillColor: "#3399ff",
						pointRadius: 4
					}),
					// http://spatialreference.org/ref/epsg/2056/
					projection: new OpenLayers.Projection("EPSG:2056")
				 });

/* more info on the projection

PROJCS["CH1903+_LV95", GEOGCS["GCS_CH1903+", DATUM["D_CH1903+", SPHEROID["Bessel_1841", 6377397.155, 299.1528128]], PRIMEM["Greenwich", 0.0], UNIT["degree", 0.017453292519943295], AXIS["Longitude", EAST], AXIS["Latitude", NORTH]], PROJECTION["Oblique_Mercator"], PARAMETER["longitude_of_center", 7.439583333333333], PARAMETER["latitude_of_center", 46.95240555555556], PARAMETER["azimuth", 90.0], PARAMETER["scale_factor", 1.0], PARAMETER["false_easting", 2600000.0], PARAMETER["false_northing", 1200000.0], PARAMETER["rectified_grid_angle", 90.0], UNIT["m", 1.0], AXIS["x", EAST], AXIS["y", NORTH]]

*/


                map.addLayer(layer);

				var markers = new OpenLayers.Layer.Markers( "Markers" );
				map.addLayer(markers);

/*
				navigator.geolocation.getCurrentPosition(function(position) {       
						document.getElementById('info').innerHTML
							= " Latitude: " + 
								position.coords.latitude + 
							  " Longitude: " +
								position.coords.longitude;

						var lonLat = new OpenLayers.LonLat(position.coords.longitude,
											    position.coords.latitude)
								  .transform(
											  new OpenLayers.Projection("EPSG:4326"), //transform from WGS 1984
											  map.getProjectionObject() //to Spherical Mercator Projection
									);
											            
						markers.addMarker(new OpenLayers.Marker(lonLat));
					   
						map.setCenter(lonLat, 14 // Zoom level
						);

						// -- hackidy hack http://docs.openlayers.org/library/spherical_mercator.html --
						//layer.features[1].geometry.transform(
						//	new OpenLayers.Projection("EPSG:2056"), //transform from WGS 1984
						//	new OpenLayers.Projection("EPSG:4326") //to Spherical Mercator Projection
						//);
				   
					});*/
 
            }
        </script>
    </head>
    <body onload="init()">
        <div id="map" class="smallmap"></div>
        <div id="info"></div>
    </body>
</html>
